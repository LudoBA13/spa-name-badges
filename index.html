<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Name Badge Generator</title>
	<style>
		body
		{
			font-family: sans-serif;
			display: flex;
			height: 100vh;
			margin: 0;
		}
		#input-zone
		{
			flex: 1;
			padding: 1rem;
			display: flex;
			flex-direction: column;
		}
		#input-zone textarea
		{
			flex: 1;
			resize: none;
			font-family: monospace;
		}
		#preview-zone
		{
			flex: 2;
			padding: 1rem;
			background-color: #f0f0f0;
			overflow: auto;
		}
		.page
		{
			background-color: white;
			width: 210mm;
			height: 297mm;
			margin: 1rem auto;
			box-shadow: 0 0 0.5cm rgba(0,0,0,0.5);
		}
	</style>
</head>
<body>
	<div id="input-zone">
		<h2>Input Names</h2>
		<textarea id="name-input" placeholder="Enter one name per line"></textarea>
	</div>
	<div id="preview-zone">
		<h2>Preview</h2>
		<div class="page"></div>
	</div>
	<script>
		const nameInput = document.getElementById('name-input');
		const previewZone = document.getElementById('preview-zone');
		let debounceTimer;

		nameInput.addEventListener('input', schedulePreview);

		nameInput.addEventListener('keydown', function(e)
		{
			if (e.key == 'Tab')
			{
				e.preventDefault();
				const start = this.selectionStart;
				const end   = this.selectionEnd;

				// set textarea value to: text before caret + tab + text after caret
				this.value = this.value.substring(0, start) +
				"\t" + this.value.substring(end);

				// put caret at right position again
				this.selectionStart =
				this.selectionEnd = start + 1;
			}
		});


		function formatName(lastName, firstName)
		{
			lastName  = lastName.toUpperCase();
			firstName = firstName.toLowerCase().replace(
				/(^|\P{L})\p{L}/gu,
				str => str.toUpperCase()
			);

			return lastName + ' ' + firstName;
		}

		function schedulePreview()
		{
			clearTimeout(debounceTimer);
			debounceTimer = setTimeout(() => { updatePreview(); }, 300);
		}

		function updatePreview()
		{
			// Clear previous preview
			previewZone.innerHTML = '<h2>Preview</h2>';

			const names = nameInput.value.split('\n').filter(name => name.trim() !== '');

			if (names.length === 0)
			{
				const page = document.createElement('div');
				page.className = 'page';
				previewZone.appendChild(page);
				return;
			}

			const page = document.createElement('div');
			page.className = 'page';
			previewZone.appendChild(page);

			names.forEach(name =>
			{
				const badge = createBadge(name, '');
				page.appendChild(badge);
			});
		}

		function createDiv(className)
		{
			const div = document.createElement('div');
			div.className = 'className';

			return div;
		}

		function createBadge(badgeName, badgeTitle)
		{
			const badge  = createDiv('badge');
			const header = createDiv('header');
			const body   = createDiv('body');
			const name   = createDiv('name');
			const title  = createDiv('title');

			name.textContent = badgeName;

			body.append(name, title);
			badge.append(header, body);

			return badge;
		}

		// Initial preview update
		updatePreview();
	</script>
</body>
</html>
